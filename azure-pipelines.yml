# wix3 toolset build pipeline

pool:
  vmImage: 'vs2017-win2016'

steps:
- task: MSBuild@1
  displayName: Report build diagnostics information
  inputs:
    solution: 'tools\diagnostics.proj'
    msbuildArguments: '/t:Diagnostics'

- task: MSBuild@1
  displayName: Initialize build
  inputs:
    solution: 'tools\OneTimeWixBuildInitialization.proj'
    msbuildArguments: '/v:diag'
    configuration: 'Release'

- task: MSBuild@1
  displayName: Report build diagnostics information
  inputs:
    solution: 'wix.proj'
    msbuildArguments: '/t:Diagnostics'
    logFileVerbosity: 'normal'


- task: MSBuild@1
  displayName: Build wix3 toolset
  inputs:
    solution: 'wix.proj'
    msbuildVersion: '15.0'
    platform: 'AnyCPU'
    configuration: 'Release'
    msbuildArguments: '/t:Build'
    createLogFile: true
    logFileVerbosity: 'normal'